{"version":3,"file":"filemanager.min.js","sources":["../sources/views/actions.js","../sources/types.js","../sources/locale.js","../sources/widgets/filelist.js","../sources/widgets/filemenu.js","../sources/widgets/filetree.js","../sources/widgets/filetable.js","../sources/widgets/fileview.js","../sources/widgets/path.js","../sources/defaults.js","../sources/history.js","../sources/sort.js","../sources/load.js","../sources/path.js","../sources/save.js","../sources/views/modes.js","../sources/views/modeviews.js","../sources/views/table.js","../sources/views/toggle.js","../sources/views/tree.js","../sources/ui.js","../sources/views/mainlayout.js","../sources/views/toolbar.js","../sources/views/menu.js","../sources/views/back.js","../sources/views/forward.js","../sources/views/up.js","../sources/views/path.js","../sources/views/search.js","../sources/views/bodylayout.js","../sources/views/treelayout.js","../sources/views/panel.js","../sources/views/treetoolbar.js","../sources/views/expandall.js","../sources/views/collapseall.js","../sources/views/files.js","../sources/views/columns.js","../sources/views/upload.js","../sources/filemanager.js","../sources/tree.js"],"sourcesContent":["function getData(){\n\treturn [\n\t\t{id: \"copy\", batch: \"item\", method: \"markCopy\",  icon: \"fm-copy\", value: webix.i18n.filemanager.copy},\n\t\t{id: \"cut\", batch: \"item\", method: \"markCut\", icon: \"fm-cut\", value: webix.i18n.filemanager.cut},\n\t\t{id: \"paste\",  method: \"pasteFile\", icon: \"fm-paste\", value: webix.i18n.filemanager.paste},\n\t\t{ $template:\"Separator\" },\n\t\t{id: \"create\", method: \"createFolder\", icon: \"fm-folder\", value: webix.i18n.filemanager.create},\n\t\t{id: \"remove\", batch: \"item\", method: \"deleteFile\", icon: \"fm-delete\", value: webix.i18n.filemanager.remove},\n\t\t{id: \"edit\", batch: \"item\", method: \"editFile\",  icon: \"fm-edit\", value: webix.i18n.filemanager.rename},\n\t\t{id: \"upload\", method: \"uploadFile\", event:\"UploadDialog\", icon: \"fm-upload\", value: webix.i18n.filemanager.upload}\n\t];\n}\n\nexport function init(view){\n\tview.attachEvent(\"onComponentInit\", () => ready(view));\n\n\tvar templateName = view.config.templateName;\n\tvar data = getData();\n\n\n\tvar popup = {\n\t\tview: \"filemenu\",\n\t\tid:\"actions\",\n\t\twidth: 200,\n\t\tpadding:0,\n\t\tautofocus: false,\n\t\tcss: \"webix_fmanager_actions\",\n\t\ttemplate: function(obj,common){\n\t\t\tvar name = templateName(obj,common);\n\t\t\tvar icon = obj.icon.indexOf(\"fm-\") == -1?obj.icon:\"webix_fmanager_icon \"+obj.icon;\n\t\t\treturn \"<span class='\"+icon+\"'></span> \"+name+\"\";\n\t\t},\n\t\tdata: data\n\t};\n\n\n\tview.callEvent(\"onViewInit\", [\"actions\", popup]);\n\tview._contextMenu = view.ui(popup);\n\tview.attachEvent(\"onDestruct\",function(){\n\t\tview._contextMenu.destructor();\n\t});\n}\n\nfunction ready(view){\n\tvar menu = view.getMenu();\n\tif(menu){\n\t\tmenu.attachEvent(\"onItemClick\",function(id,e){\n\t\t\tvar obj = this.getItem(id);\n\t\t\tvar method = view[obj.method]||view[id];\n\t\t\tif(method){\n\t\t\t\tvar active = view.getActive();\n\t\t\t\tif(view.callEvent(\"onbefore\"+(obj.event||obj.method||id),[active])){\n\t\t\t\t\tif(!(id==\"upload\" && view.config.legacyUploader)){\n\t\t\t\t\t\tif(view._uploadPopup)\n\t\t\t\t\t\t\tview._uploadPopup.hide();\n\t\t\t\t\t\tmenu.hide();\n\t\t\t\t\t}\n\t\t\t\t\tvar args = [active];\n\t\t\t\t\tif(id==\"upload\"){\n\t\t\t\t\t\te = webix.html.pos(e);\n\t\t\t\t\t\targs.push(e);\n\t\t\t\t\t}\n\t\t\t\t\twebix.delay(function(){\n\t\t\t\t\t\tmethod.apply(view,args);\n\t\t\t\t\t\tview.callEvent(\"onafter\"+(obj.event||obj.method||id),[]);\n\t\t\t\t\t});\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t});\n\t\tmenu.attachEvent(\"onBeforeShow\",function(e){\n\t\t\tmenu.filter(\"\");\n\t\t\tmenu.hide();\n\t\t\tvar c = menu.getContext();\n\n\t\t\t//context menu over empty area \n\t\t\tif(c && c.obj && !c.id)\n\t\t\t\tc.obj.unselectAll();\n\t\t\t\n\t\t\tif(c && c.obj)\n\t\t\t\treturn c.obj.callEvent(\"onBeforeMenuShow\",[c.id,e]);\n\n\t\t\treturn true;\n\t\t});\n\n\t}\n}\n","// tree type\nwebix.type(webix.ui.tree,{\n\tname: \"FileTree\",\n\tcss: \"webix_fmanager_tree\",\n\tdragTemplate: webix.template(\"#value#\"),\n\ticon:function(obj){\n\t\tvar html = \"\";\n\t\tfor(var i =1; i < obj.$level; i++){\n\t\t\thtml += \"<div class='webix_tree_none'></div>\";\n\t\t}\n\t\tif(obj.webix_child_branch && !obj.$count){\n\t\t\thtml += \"<div class='webix_tree_child_branch webix_fmanager_icon webix_tree_close'></div>\";\n\t\t}\n\t\telse if (obj.$count>0){\n\t\t\tif (obj.open)\n\t\t\t\thtml += \"<div class='webix_fmanager_icon webix_tree_open'></div>\";\n\t\t\telse\n\t\t\t\thtml += \"<div class='webix_fmanager_icon webix_tree_close'></div>\";\n\t\t} else\n\t\t\thtml += \"<div class='webix_tree_none'></div>\";\n\t\treturn html;\n\t},\n\tfolder:function(obj){\n\t\tif (obj.$count && obj.open)\n\t\t\treturn \"<div class='webix_fmanager_icon webix_folder_open'></div>\";\n\t\treturn \"<div class='webix_fmanager_icon webix_folder'></div>\";\n\t}\n});\n// dataview type\nwebix.type(webix.ui.dataview, {\n\tname:\"FileView\",\n\tcss: \"webix_fmanager_files\",\n\theight: 110,\n\tmargin: 10,\n\twidth: 150,\n\ttemplate: function(obj,common){\n\t\tvar css = \"webix_fmanager_data_icon\";\n\t\tvar name = common.templateName(obj,common);\n\t\treturn \"<div class='webix_fmanager_file'><div class='\"+css+\"'>\"+common.templateIcon(obj,common)+\"</div>\"+name+\"</div>\";\n\t}\n});","// locale values\nwebix.i18n.filemanager = {\n\tactions: \"Actions\",\n\tback: \"Back\",\n\tforward: \"Forward\",\n\tlevelUp: \"Level Up\",\n\tname: \"Name\",\n\tsize: \"Size\",\n\ttype: \"Type\",\n\tdate: \"Date\",\n\tcopy: \"Copy\",\n\tcut: \"Cut\",\n\tpaste: \"Paste\",\n\tupload: \"Upload\",\n\tremove: \"Delete\",\n\tcreate: \"Create Folder\",\n\trename: \"Rename\",\n\tlocation: \"Location\",\n\tselect: \"Select Files\",\n\tsizeLabels: [\"B\",\"KB\",\"MB\",\"GB\"],\n\ticonsView: \"Icons View\",\n\ttableView: \"Table View\",\n\thideTree: \"Hide Tree\",\n\tshowTree: \"Show Tree\",\n\tcollapseTree: \"Collapse Tree\",\n\texpandTree: \"Expand Tree\",\n\tsaving: \"Saving...\",\n\terrorResponse: \"Error: changes were not saved!\",\n\treplaceConfirmation: \"The folder already contains files with such names. Would you like to replace existing files ?\",\n\tcreateConfirmation: \"The folder with such a name already exists. Would you like to replace it ?\",\n\trenameConfirmation: \"The file with such a name already exists. Would you like to replace it ?\",\n\tyes: \"Yes\",\n\tno: \"No\",\n\ttypes:{\n\t\tfolder: \"Folder\",\n\t\tdoc: \"Document\",\n\t\texcel: \"Excel\",\n\t\tpdf: \"PDF\",\n\t\tpp: \"PowerPoint\",\n\t\ttext: \"Text File\",\n\t\tvideo: \"Video File\",\n\t\timage: \"Image\",\n\t\tcode: \"Code\",\n\t\taudio: \"Audio\",\n\t\tarchive: \"Archive\",\n\t\tfile: \"File\"\n\t}\n};\n","webix.protoUI({\n\tname:\"filelist\"\n}, webix.EditAbility, webix.ui.list);","webix.protoUI({\n\tname:\"filemenu\"\n}, webix.ContextHelper, webix.ui.submenu);","// editable Tree\nwebix.protoUI({\n\tname:\"filetree\",\n\t$dragHTML:function(item, pos){\n\t\tvar ctx = webix.DragControl.getContext();\n\t\tvar type = this.type;\n\t\tvar text = type.dragTemplate(item,type);\n\t\tvar size = webix.html.getTextSize(text);\n\t\tvar posView = webix.html.offset(this.$view);\n\t\tvar offset = pos.x - posView.x;\n\t\tctx.x_offset = offset > size.width? - size.width/4 : -offset;\n\t\tctx.y_offset = - size.height/2;\n\t\treturn \"<div class='webix_tree_item webix_fmanager_drag' style='width:auto'>\"+text+\"</div>\";\n\t}\n}, webix.EditAbility, webix.ui.tree);","// Datatable with customized drag element\nwebix.protoUI({\n\tname:\"filetable\",\n\t$dragHTML:function(item, pos){\n\t\tvar ctx = webix.DragControl.getContext();\n\t\tvar index = this.getColumnIndex(\"value\");\n\t\tvar text = this.config.columns[index].template(item,this.type);\n\t\tvar size = webix.html.getTextSize(text);\n\n\t\tvar posView = webix.html.offset(this.$view);\n\t\tvar offset = pos.clientX - posView.x;\n\t\t\n\t\tctx.x_offset = offset > size.width? - size.width/4 : -offset;\n\t\tctx.y_offset = - size.height/2;\n\n\t\tvar html=\"<div class='webix_dd_drag webix_fmanager_drag' >\";\n\t\thtml += \"<div style='width:\"+(size.width+40)+\"px'>\"+ text+\"</div>\";\n\t\treturn html+\"</div>\";\n\t}\n}, webix.ui.datatable);","// editable Dataview\nwebix.protoUI({\n\tname:\"fileview\"\n}, webix.EditAbility, webix.ui.dataview);","// a new view for path display, based on List view\nwebix.protoUI({\n\tname: \"path\",\n\tdefaults:{\n\t\tlayout: \"x\",\n\t\tseparator: \",\",\n\t\tscroll: false\n\t},\n\t$skin:function(){\n\t\tthis.type.height = webix.skin.$active.buttonHeight||webix.skin.$active.inputHeight;\n\t},\n\t$init: function(){\n\t\tthis.$view.className += \" webix_path\";\n\t},\n\tvalue_setter: function(value){\n\t\tthis.setValue();\n\t\treturn \tvalue;\n\t},\n\tsetValue: function(values){\n\t\tthis.clearAll();\n\t\tif(values){\n\t\t\tif(typeof(values) == \"string\"){\n\t\t\t\tvalues = values.split(this.config.separator);\n\t\t\t}\n\t\t\tthis.parse(webix.copy(values));\n\t\t}\n\t},\n\tgetValue: function(){\n\t\treturn this.serialize();\n\t}\n},webix.ui.list);","export const values = {\n\tmodes: [\"table\",\"files\"],\n\tmode: \"table\",\n\thandlers: {},\n\tstructure:{},\n\tfsIds: true,\n\ttemplateName: webix.template(\"#value#\"),\n\ttemplateSize: function(obj){\n\t\tvar value = obj.size;\n\t\tvar labels = webix.i18n.filemanager.sizeLabels;\n\t\tvar pow = 0;\n\t\twhile(value/1024 >1){\n\t\t\tvalue = value/1024;\n\t\t\tpow++;\n\t\t}\n\t\tvar isInt = (parseInt(value,10) == value);\n\n\t\tvar format = webix.Number.numToStr({\n\t\t\tdecimalDelimiter:webix.i18n.decimalDelimiter,\n\t\t\tgroupDelimiter:webix.i18n.groupDelimiter,\n\t\t\tdecimalSize : isInt?0:webix.i18n.groupSize\n\t\t});\n\n\t\treturn format(value)+\"\"+labels[pow];\n\t},\n\ttemplateType: function(obj){\n\t\tvar types = webix.i18n.filemanager.types;\n\t\treturn types&&types[obj.type]?types[obj.type]:obj.type;\n\t},\n\ttemplateDate: function(obj){\n\t\tvar date = obj.date;\n\t\tif(typeof(date) != \"object\"){\n\t\t\tdate = new Date(parseInt(obj.date,10)*1000);\n\t\t}\n\t\treturn webix.i18n.fullDateFormatStr(date);\n\t},\n\ttemplateCreate: function(){\n\t\treturn {value: \"newFolder\", type: \"folder\", date: new Date()};\n\t},\n\ttemplateIcon: function(obj,common){\n\t\treturn \"<div class='webix_fmanager_icon fm-\"+(common.icons[obj.type]||common.icons.file)+\"'></div>\";\n\t},\n\tuploadProgress: {\n\t\ttype:\"icon\",\n\t\thide:false\n\t},\n\t//idChange: true,\n\ticons: {\n\t\tfolder: \"folder\",\n\t\texcel: \"file-excel\",\n\t\tpdf: \"file-pdf\",\n\t\tpp: \"file-powerpoint\",\n\t\ttext: \"file-text\",\n\t\tvideo: \"file-video\",\n\t\timage: \"file-image\",\n\t\tcode: \"file-code\",\n\t\taudio: \"file-audio\",\n\t\tarchive: \"file-archive\",\n\t\tdoc: \"file-word\",\n\t\tfile: \"file\"\n\t}\n};","export function init(view){\n\tview._cursorHistory = [];\n\tview.$ready.push(()=>setHandlers(view));\n}\n\nfunction setHandlers(view){\n\n\tview.attachEvent(\"onAfterCursorChange\", function(id){\n\t\tif(!view._historyIgnore){\n\t\t\tif(!view._historyCursor )\n\t\t\t\tview._cursorHistory.splice(1);\n\t\t\tif(view._cursorHistory[this._historyCursor] != id){\n\t\t\t\tif(view._cursorHistory.length==20)\n\t\t\t\t\tview._cursorHistory.splice(0,1);\n\t\t\t\tview._cursorHistory.push(id);\n\t\t\t\tview._historyCursor = this._cursorHistory.length-1;\n\t\t\t}\n\t\t}\n\t\tview._historyIgnore = false;\n\t\tview.callEvent(\"onHistoryChange\",[id, view._cursorHistory,view._historyCursor]);\n\t});\n}\n\n\nexport function changeCursor(view, step){\n\tif(view._cursorHistory.length>1){\n\t\tvar index = view._historyCursor + step;\n\t\tif(index>-1 && index < view._cursorHistory.length){\n\t\t\tview._historyIgnore = true;\n\t\t\tview._historyCursor = index;\n\t\t\tview.setCursor(view._cursorHistory[index]);\n\t\t}\n\t}\n\treturn view.getCursor();\n}","export function sortData(sort, data){\n\tvar sorter = webix.DataStore.prototype.sorting.create(sort);\n\tvar folders = [];\n\tvar files = [];\n\tfor(var i =0; i < data.length; i++){\n\t\tif(data[i].type == \"folder\")\n\t\t\tfolders.push(data[i]);\n\t\telse\n\t\t\tfiles.push(data[i]);\n\t}\n\tfolders.sort(sorter);\n\tfiles.sort(sorter);\n\treturn folders.concat(files);\n}","import * as sorting from \"./sort\";\n\nexport function init(view){\n\tview.attachEvent(\"onBeforeCursorChange\", function(){\n\t\tview.$skipDynLoading = false;\n\t\treturn true;\n\t});\n\tsetDataParsers(view);\n}\n\nfunction setDataParsers(view){\n\tview.dataParser = {\n\t\tfiles: function(obj, data){\n\t\t\tif(this.config.noFileCache){\n\t\t\t\tclearBranch(this, obj.id);\n\t\t\t}\n\t\t\telse\n\t\t\t\tobj.webix_files = 0;\n\n\t\t\tparseData(this, data);\n\t\t},\n\t\tbranch : function(obj, data){\n\t\t\tif(this.config.noFileCache){\n\t\t\t\tclearBranch(this, obj.id);\n\t\t\t}\n\t\t\telse{\n\t\t\t\tobj.webix_branch = 0;\n\t\t\t\tobj.webix_child_branch = 0;\n\t\t\t}\n\n\t\t\tparseData(this, data);\n\t\t}\n\t};\n}\nexport function loadDynData(view, url, obj, mode, open){\n\tview.showProgress();\n\tif(view.callEvent(\"onBeforeDynLoad\", [url, obj, mode, open])){\n\t\tif (url.load)\n\t\t\treturn url.load(null, { action: mode, source: obj.id})\n\t\t\t\t.then(\n\t\t\t\t\tfunction(data){\n\t\t\t\t\t\tview.hideProgress();\n\t\t\t\t\t\tdata = convertData(view, data);\n\t\t\t\t\t\tif(open)\n\t\t\t\t\t\t\tobj.open = true;\n\n\t\t\t\t\t\tif(view.callEvent(\"onBeforeDynParse\", [obj, data, mode])){\n\t\t\t\t\t\t\tview.dataParser[mode].call(view, obj, data);\n\t\t\t\t\t\t\tview.callEvent(\"onAfterDynParse\", [obj, data, mode]);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tfunction(){\n\t\t\t\t\t\tview.hideProgress();\n\t\t\t\t\t\tview.callEvent(\"onDynLoadError\",[]);\n\t\t\t\t\t}\n\t\t\t\t);\n\t}\n}\n\nexport function clearBranch(view, id){\n\tvar items = [];\n\n\tview.data.eachChild(id,function(item){\n\t\tif(!view.data.branch[item.id] && item.type != \"folder\")\n\t\t\titems.push(item.id);\n\t},view,true);\n\n\tfor(var i=0; i< items.length; i++){\n\t\tview.remove(items[i]);\n\t}\n}\n\nexport function parseData(view, data){\n\tview.parse(data);\n\tview.$skipDynLoading = true;\n\tview._refreshActiveFolder();\n\tview.$skipDynLoading = false;\n}\n\nexport function openFolders(view, folders){\n\tvar dynMode, i, pItem;\n\tvar defer = webix.promise.defer();\n\tdynMode = getDynMode(view);\n\n\tif(dynMode && folders.length){\n\t\tfor(i =0; i < folders.length; i++){\n\t\t\tpItem = view.getItem(folders[i]);\n\t\t\tif(!(pItem && !pItem[\"webix_\" + dynMode])){\n\t\t\t\topenDynFolder(view,folders.slice(i), dynMode, defer);\n\t\t\t\treturn defer;\n\t\t\t}\n\t\t\telse{\n\t\t\t\tpItem.open = true;\n\t\t\t\tif(view.$$(\"tree\"))\n\t\t\t\t\tview.$$(\"tree\").refresh(folders[i]);\n\t\t\t}\n\t\t}\n\t\tdefer.resolve(folders[i]);\n\t}\n\telse{\n\t\tdefer.reject();\n\t}\n\treturn defer;\n}\nfunction openDynFolder(view,ids, mode, defer){\n\tvar obj = view.getItem(ids[0]);\n\tview.showProgress();\n\tvar url = view.config.handlers[mode];\n\tif (url.load)\n\t\treturn url.load(null, { action: mode, source: ids[0]})\n\t\t\t.then(\n\t\t\t\tfunction(data){\n\t\t\t\t\tview.hideProgress();\n\t\t\t\t\tdata = convertData(view, data);\n\t\t\t\t\tif(view.callEvent(\"onBeforeDynParse\", [obj, data, mode])){\n\t\t\t\t\t\tobj.open = true;\n\t\t\t\t\t\tview.dataParser[mode].call(view, obj, data);\n\n\t\t\t\t\t\tvar lastId = ids.shift();\n\t\t\t\t\t\tif(ids.length && view.getItem(ids[0]).type == \"folder\"){\n\t\t\t\t\t\t\topenDynFolder(view,ids, mode, defer);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tview.refreshCursor();\n\t\t\t\t\t\t\tdefer.resolve(lastId);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tview.callEvent(\"onAfterDynParse\", [obj, data, mode]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n}\n\nexport function getDynMode(view){\n\tfor(var mode in view.dataParser){\n\t\tif (view.config.handlers[mode]) {\n\t\t\treturn mode;\n\t\t}\n\t}\n\treturn null;\n}\nexport function loadSearchData(view, url, id, value){\n\tvar params =  { action:\"search\", source: id, text: value};\n\tif(view.callEvent(\"onBeforeSearchRequest\",[id, params])){\n\t\tif (url.load)\n\t\t\treturn url.load(null, params)\n\t\t\t\t.then(\n\t\t\t\t\tfunction(data){\n\t\t\t\t\t\tview.hideProgress();\n\t\t\t\t\t\tdata = convertData(view, data);\n\t\t\t\t\t\tparseSearchData(view, data);\n\t\t\t\t\t\tview.$searchValue = value;\n\t\t\t\t\t},\n\t\t\t\t\tfunction(){\n\t\t\t\t\t\tview.hideProgress();\n\t\t\t\t\t}\n\t\t\t\t);\n\t}\n}\nexport function parseSearchData(view, data){\n\tview.callEvent(\"onShowSearchResults\",[]);\n\tview.$searchResults = true;\n\tvar cell = view.$$(view.config.mode);\n\tif(cell && cell.filter){\n\t\tcell.clearAll();\n\t\tif(view.sortState && view.sortState.view == cell.config.id)\n\t\t\tdata = sorting.sortData(view.sortState.sort, data);\n\t\tcell.parse(data);\n\t}\n}\n\nfunction convertData(view, data){\n\tif (data && typeof data.text === \"function\")\n\t\tdata = data.text();\n\treturn view.data.driver.toObject(data);\n}","export function getPath(view, id){\n\tid = id||view.getCursor();\n\tvar path = [];\n\twhile(id && view.getItem(id)){\n\t\tpath.push(id);\n\t\tid = view.getParentId(id);\n\t}\n\treturn path.reverse();\n}\n\nexport function getPathNames(view, id){\n\tid = id||view.getCursor();\n\tvar item = null;\n\tvar path = [];\n\twhile(id && view.getItem(id)){\n\t\titem = view.getItem(id);\n\t\tpath.push({id:id, value:view.config.templateName(item)});\n\t\tid = view.getParentId(id);\n\t}\n\treturn path.reverse();\n}\n\n\nexport function setPath(view, id){\n\tvar pId = id;\n\twhile(pId && view.getItem(pId)){\n\t\tview.callEvent(\"onPathLevel\",[pId]);\n\t\tpId = view.getParentId(pId);\n\t}\n\tif(view.getItem(id)){\n\t\tif(id!= view.getCursor()){\n\t\t\tview.setCursor(id);\n\t\t\tview.callEvent(\"onPathComplete\",[id]);\n\t\t}\n\n\t}else{\n\t\t// dynamic loading\n\t\tvar folders = getParentFolders(id);\n\t\tview.openFolders(folders).then(function(){\n\t\t\tview.setCursor(id);\n\t\t\tview.callEvent(\"onPathComplete\",[id]);\n\t\t});\n\t}\n\n}\n\nexport function getParentFolders(id){\n\tvar i, parts,\n\t\tids = [];\n\tif(typeof id == \"string\"){\n\t\tparts = id.replace(/^\\//,\"\").split(\"/\");\n\t\tfor(i=0; i< parts.length; i++){\n\t\t\tids.push(parts.slice(0, i+1).join(\"/\"));\n\t\t}\n\t}\n\treturn ids;\n}","export function makeSaveRequest(view, url, obj, callback){\n\tif(view.callEvent(\"onBeforeRequest\",[url, obj])){\n\t\tshowSaveMessage(view);\n\t\tif(url.load){\n\t\t\turl.load(null, webix.copy(obj))\n\t\t\t\t.then(\n\t\t\t\t\tfunction(data){\n\t\t\t\t\t\tif (data && typeof data.text === \"function\")\n\t\t\t\t\t\t\tdata = data.text();\n\t\t\t\t\t\tdata = view.data.driver.toObject(data);\n\t\t\t\t\t\thideSaveMessage(view);\n\t\t\t\t\t\tif(view.callEvent(\"onSuccessResponse\",[obj,data]) && callback)\n\t\t\t\t\t\t\tcallback.call(view,obj,data);\n\t\t\t\t\t},\n\t\t\t\t\tfunction(error){\n\t\t\t\t\t\tif(view.callEvent(\"onErrorResponse\", [obj, error]))\n\t\t\t\t\t\t\terrorHandler(view, error);\n\t\t\t\t\t}\t\n\t\t\t\t);\n\t\t}\n\t}\n}\n\nfunction showSaveMessage(view, message){\n\tview._saveMessageDate = new Date();\n\tif (!view._saveMessage){\n\t\tview._saveMessage = webix.html.create(\"DIV\",{ \"class\":\"webix_fmanager_save_message\"},\"\");\n\t\tview.$view.style.position = \"relative\";\n\t\twebix.html.insertBefore(view._saveMessage, view.$view);\n\t}\n\tvar msg = \"\";\n\tif (!message) {\n\t\tmsg = webix.i18n.filemanager.saving;\n\t} else{\n\t\tmsg = webix.i18n.filemanager.errorResponse;\n\t}\n\n\tview._saveMessage.innerHTML = msg;\n}\n\nfunction hideSaveMessage(view){\n\tif (view._saveMessage){\n\t\twebix.html.remove(view._saveMessage);\n\t\tview._saveMessage = null;\n\t}\n}\n\nexport function errorHandler(view){\n\t// reload data on error response\n\tconst url = view.data.url;\n\tif(url){\n\t\tshowSaveMessage(view, true);\n\t\twebix.ajax(url)\n\t\t\t.then((data)=>{\n\t\t\t\tif (data && typeof data.text === \"function\")\n\t\t\t\t\tdata = data.text();\n\t\t\t\tdata = view.data.driver.toObject(data);\n\t\t\t\tif (data){\n\t\t\t\t\tview.clearAll();\n\t\t\t\t\tview.parse(data);\n\t\t\t\t\tview.data.url = url;\n\t\t\t\t}\n\t\t\t});\n\t}\n}","export function init(view,settings){\n\tview.attachEvent(\"onComponentInit\", () => ready(view));\n\n\tvar options = [];\n\n\tsettings.modes.forEach(function(mode){\n\t\tif(mode == \"table\")\n\t\t\toptions.push(getModeConfig(mode, \"table\"));\n\t\telse if(mode == \"files\")\n\t\t\toptions.push(getModeConfig(mode, \"icons\"));\n\t});\n\n\tvar config = { view: \"segmented\", width: 70, options: options, css:\"webix_fmanager_modes\", value: settings.mode};\n\n\treturn config;\n}\n\nfunction getModeConfig(mode, tooltip){\n\treturn {\n\t\tid: mode,\n\t\twidth: 32,\n\t\tvalue: \"<div class=\\\"webix_fmanager_bar_icon webix_fmanager_\"+mode+\"_mode \\\"></div>\",\n\t\ttooltip:webix.i18n.filemanager[tooltip+\"View\"]\n\t};\n}\n\nfunction ready(view){\n\tif(view.$$(\"modes\")){\n\t\tview.$$(\"modes\").attachEvent(\"onBeforeTabClick\",function(id){\n\t\t\tvar value = view.$$(\"modes\").getValue();\n\t\t\tif(view.callEvent(\"onBeforeModeChange\",[value,id])){\n\t\t\t\tif(view.$$(id)){\n\t\t\t\t\tview.config.mode = id;\n\t\t\t\t\tview.$$(id).show();\n\t\t\t\t\tview.callEvent(\"onAfterModeChange\",[value,id]);\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t});\n\t}\n}","import * as sorting from \"../sort\";\n\nexport function init(view, settings){\n\tview.attachEvent(\"onComponentInit\", () => ready(view));\n\n\treturn {\n\t\tanimate: false,\n\t\tcells: (settings.modes?webix.copy(settings.modes):[])\n\t};\n}\n\nfunction ready(view){\n\tvar i, mCell,\n\t\tcell = view.$$(view.config.mode),\n\t\tmodes = view.config.modes;\n\n\tif(cell){\n\t\tcell.show();\n\t\tview.attachEvent(\"onBeforeCursorChange\", function(){\n\t\t\tvar cell = view.$$(view.config.mode);\n\t\t\tif(cell)\n\t\t\t\tcell.unselect();\n\t\t\treturn true;\n\t\t});\n\t\tview.attachEvent(\"onAfterCursorChange\", function(){\n\t\t\tvar cell = view.$$(view.config.mode);\n\t\t\tif(cell)\n\t\t\t\tcell.editStop();\n\t\t});\n\t}\n\n\tif(modes){\n\t\tfor(i =0; i < modes.length; i++) {\n\t\t\tmCell = view.$$(modes[i]);\n\t\t\tif (mCell && mCell.filter) {\n\t\t\t\taddCellConfig(view, mCell);\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction addCellConfig(view, cell){\n\tbindData(view, cell);\n\tapplyTemplates(view, cell);\n\tsetCellHandlers(view, cell);\n\t// link with context menu\n\tvar menu = view.getMenu();\n\tif (menu && !view.config.readonly)\n\t\taddMenuHandlers(view, cell, menu);\n\t//read-only\n\tif(view.config.readonly){\n\t\tcell.define(\"drag\",false);\n\t\tcell.define(\"editable\",false);\n\t}\n}\n\nfunction bindData(view, cell){\n\tview.data.attachEvent(\"onClearAll\", () => cell.clearAll());\n\n\tview.data.attachEvent(\"onIdChange\",(oldId,newId) => {\n\t\tif(cell.data.pull[oldId])\n\t\t\tcell.data.changeId(oldId,newId);\n\t});\n\n\t// we do not need call binding on row selection\n\tcell.attachEvent(\"onBeforeSelect\", function(){\n\t\tcell.$skipBinding = true;\n\t});\n\tview.attachEvent(\"onBeforeCursorChange\", function(){\n\t\tcell.$skipBinding = false;\n\t});\n\tview.attachEvent(\"onAfterCursorChange\", function(){\n\t\tcell.$skipBinding = false;\n\t});\n\tcell.bind(view, \"$data\", (obj, source) => {\n\t\tvar url;\n\t\tif(cell.$skipBinding)\n\t\t\treturn false;\n\t\tif (!obj) return cell.clearAll();\n\n\t\tif (!view.$searchResults) {\n\t\t\tif(!view.$skipDynLoading){\n\t\t\t\tfor(var mode in view.dataParser){\n\t\t\t\t\tif(!url && obj[\"webix_\"+mode]) {\n\t\t\t\t\t\turl = view.config.handlers[mode];\n\t\t\t\t\t\tif (url) {\n\t\t\t\t\t\t\tview.$skipDynLoading = true;\n\t\t\t\t\t\t\tview.loadDynData(url, obj, mode);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t// import child items\n\t\t\timportSelectedBranch(view, cell, source, obj);\n\t\t}\n\t});\n}\n\nfunction importSelectedBranch(view, target, source, obj){\n\tvar data = [].concat(webix.copy(source.data.getBranch(obj.id))).concat(obj.files || []);\n\tif(view.sortState && view.sortState.view == target.config.id)\n\t\tdata = sorting.sortData(view.sortState.sort, data);\n\ttarget.data.importData(data, true);\n}\n\n\n\nfunction applyTemplates(view, cell){\n\tcell.type.icons = view.config.icons;\n\tcell.type.templateIcon = view.config.templateIcon;\n\tcell.type.templateName = view.config.templateName;\n\tcell.type.templateSize = view.config.templateSize;\n\tcell.type.templateDate = view.config.templateDate;\n\tcell.type.templateType = view.config.templateType;\n}\n\nfunction addMenuHandlers(view,cell,menu){\n\tcell.on_context.webix_view = function(e,id){\n\t\tid = this.locate(e.target|| e.srcElement);\n\t\tif(!id){\n\t\t\tif(menu.setContext)\n\t\t\t\tmenu.setContext({ obj:webix.$$(e)});\n\t\t\tmenu.show(e);\n\t\t\twebix.html.preventEvent(e);\n\t\t}\n\n\t};\n\tmenu.attachTo(cell);\n\n\tcell.attachEvent(\"onBeforeMenuShow\", function () {\n\t\tvar context = menu.getContext();\n\t\tvar type = \"\";\n\t\tif (context.id)\n\t\t\ttype = view.getItem(context.id).type === \"folder\" ? \"folder\" : \"file\";\n\n\t\tmenu.filter(function(obj){\n\t\t\tvar res = true;\n\n\t\t\tif (obj.batch){\n\t\t\t\tif(!type){\n\t\t\t\t\tres = (obj.batch == \"empty\");\n\t\t\t\t} else {\n\t\t\t\t\tres = (obj.batch == type || obj.batch == \"item\" || obj.batch == \"empty\");\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(view.config.menuFilter)\n\t\t\t\tres =  res && view.config.menuFilter(obj);\n\n\t\t\treturn res;\n\t\t});\n\n\t\tif(menu.count() && context.id){\n\t\t\twebix.UIManager.setFocus(this);\n\t\t\tvar sel = this.getSelectedId();\n\t\t\tvar found = false;\n\t\t\tif(webix.isArray(sel)){\n\t\t\t\tfor(var i =0; !found && i < sel.length; i++){\n\t\t\t\t\tif(\"\"+sel[i] == \"\"+context.id)\n\t\t\t\t\t\tfound = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(!found && this.exists(context.id))\n\t\t\t\tthis.select(context.id);\n\t\t}\n\n\t\treturn menu.count()>0;\n\t});\n\n\tcell.attachEvent(\"onAfterMenuShow\", function (id) {\n\t\tif(id){\n\t\t\tvar selected = this.getSelectedId(true);\n\t\t\tvar isSelected = false;\n\t\t\tfor (var i = 0; ( i < selected.length) && !isSelected; i++) {\n\t\t\t\tif (selected[i].toString() == id.toString()) {\n\t\t\t\t\tisSelected = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!isSelected)\n\t\t\t\tthis.select(id.toString());\n\n\t\t\twebix.UIManager.setFocus(this);\n\t\t}\n\t\telse{\n\t\t\tthis.unselect();\n\t\t}\n\t});\n}\nfunction setCellHandlers(view, cell){\n\n\tcell.attachEvent(\"onAfterSelect\", (id) => {\n\t\tif(view.getItem(id))\n\t\t\tview.callEvent(\"onItemSelect\",[id]);\n\t});\n\n\t// double-click handlers\n\tcell.attachEvent(\"onItemDblClick\", function(id) {\n\t\tview._onFileDblClick(id);\n\t});\n\n\t// focus and blur styling\n\tview._addElementHotKey(\"tab\", function(cell){\n\t\tif (!cell.getSelectedId()) {\n\t\t\tvar id = cell.getFirstId();\n\t\t\tif (id){\n\t\t\t\tcell.select(id);\n\t\t\t}\n\t\t}\n\t},cell);\n\tcell.attachEvent(\"onFocus\", function(){\n\t\tview._activeView = this;\n\t\twebix.html.removeCss(this.$view, \"webix_blur\");\n\t});\n\tcell.attachEvent(\"onBlur\", function() {\n\t\tif (!view.getMenu() || !view.getMenu().isVisible())\n\t\t\twebix.html.addCss(cell.$view, \"webix_blur\");\n\t});\n\n\t// editing (rename)\n\tcell.attachEvent(\"onBeforeEditStop\", function (state, editor) {\n\t\treturn this.getTopParentView().callEvent(\"onBeforeEditStop\", [editor.id || editor.row, state, editor, this]);\n\t});\n\tcell.attachEvent(\"onAfterEditStop\", function (state, editor) {\n\t\tvar view = this.getTopParentView();\n\t\tif (view.callEvent(\"onAfterEditStop\", [editor.id || editor.row, state, editor, this])) {\n\t\t\tif(!editor.column || editor.column == \"value\")\n\t\t\t\tview.renameFile(editor.id || editor.row, state.value);\n\t\t\telse if(editor.column){\n\t\t\t\tview.getItem(editor.id || editor.row)[editor.column] = state.value;\n\t\t\t}\n\t\t}\n\t});\n\n\t// drag-n-drop\n\tcell.attachEvent(\"onBeforeDrop\", function (context, e) {\n\t\tif (view.callEvent(\"onBeforeDrop\", [context])) {\n\t\t\tif (context.from) {    //from different component\n\t\t\t\tview.moveFile(context.source, context.target);\n\t\t\t\tview.callEvent(\"onAfterDrop\",[context,e]);\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t});\n\tcell.attachEvent(\"onBeforeDrag\", function (context, e) {\n\t\treturn !view.config.readonly&&view.callEvent(\"onBeforeDrag\", [context, e]);\n\t});\n\tcell.attachEvent(\"onBeforeDragIn\", function (context, e) {\n\t\treturn !view.config.readonly&&view.callEvent(\"onBeforeDragIn\", [context, e]);\n\t});\n\n\t// enter hot key\n\tview._addElementHotKey(\"enter\", function (sview) {\n\t\tvar selected = sview.getSelectedId(true);\n\t\tfor (var i = 0; i < selected.length; i++) {\n\t\t\tview._onFileDblClick(selected[i]);\n\t\t}\n\t\twebix.UIManager.setFocus(sview);\n\t\tselected = sview.getSelectedId(true);\n\t\tif (!selected.length) {\n\t\t\tvar id0 = sview.getFirstId();\n\t\t\tif (id0)\n\t\t\t\tsview.select(id0);\n\t\t}\n\t}, cell);\n\n\n}","export function init(view){\n\tview.attachEvent(\"onComponentInit\", () => ready(view));\n\n\treturn {\n\t\tview: \"filetable\",\n\t\tcss: \"webix_fmanager_table\",\n\t\tcolumns: \"columns\",\n\t\theaderRowHeight: 34,\n\t\teditable: true,\n\t\teditaction: false,\n\t\tselect: \"multiselect\",\n\t\tdrag: true,\n\t\tnavigation: true,\n\t\tresizeColumn:true,\n\t\ttabFocus: true,\n\t\tonContext:{}\n\t};\n}\n\nfunction ready(view){\n\tif(view.$$(\"table\")){\n\t\tview.attachEvent(\"onHideSearchResults\", function(){\n\t\t\tif(view.$$(\"table\").isColumnVisible(\"location\"))\n\t\t\t\tview.$$(\"table\").hideColumn(\"location\");\n\t\t});\n\t\tview.attachEvent(\"onShowSearchResults\", function(){\n\t\t\tif(!view.$$(\"table\").isColumnVisible(\"location\"))\n\t\t\t\tview.$$(\"table\").showColumn(\"location\");\n\t\t});\n\n\t\tview.$$(\"table\").attachEvent(\"onBeforeEditStart\", function(id){\n\t\t\tif(typeof(id) != \"object\"){\n\t\t\t\tthis.edit({row:id,column: \"value\"});\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t});\n\n\t\t// sorting\n\t\tview.$$(\"table\").data.attachEvent(\"onBeforeSort\", function(by, dir, as, sort){\n\t\t\tview.sortState = {\n\t\t\t\tview:  view.$$(\"table\").config.id,\n\t\t\t\tsort: sort\n\t\t\t};\n\t\t\tif(view.$searchResults && view.$$(\"search\")){\n\t\t\t\tview.showSearchResults(view.$$(\"search\").getValue());\n\t\t\t\treturn false;\n\t\t\t}\n\t\t});\n\t\tview.data.attachEvent(\"onClearAll\", function(){\n\t\t\tview.sortState = null;\n\t\t});\n\t}\n}","export function init(view){\n\tview.attachEvent(\"onComponentInit\", () => ready(view));\n\n\treturn { view: \"button\", type:\"htmlbutton\", css: \"webix_fmanager_toggle\",\n\t\tlabel: \"<div class=\\\"webix_fmanager_bar_icon \\\"></div>\", width: 30,\n\t\ttooltip: webix.i18n.filemanager.hideTree\n\t};\n}\n\nfunction ready(view){\n\tif(view.$$(\"hideTree\")){\n\t\tview.$$(\"hideTree\").attachEvent(\"onItemClick\", function(){\n\t\t\tview.hideTree();\n\t\t});\n\t}\n}","export function init(view){\n\tview.attachEvent(\"onComponentInit\", () => ready(view));\n\n\treturn {\n\t\twidth: 251,\n\t\tview: \"filetree\",\n\t\tid: \"tree\",\n\t\tselect: true,\n\t\tfilterMode:{\n\t\t\tshowSubItems:false,\n\t\t\topenParents:false\n\t\t},\n\t\ttype: \"FileTree\",\n\t\tnavigation: true,\n\t\teditor:\"text\",\n\t\teditable: true,\n\t\teditaction: false,\n\t\tdrag: true,\n\t\ttabFocus: true,\n\t\tonContext:{}\n\t};\n}\n\nfunction ready(view){\n\tvar tree = view.$$(\"tree\");\n\tvar state;\n\n\tif(tree){\n\n\n\t\ttree.type.icons = view.config.icons;\n\n\t\t// data source definition (syncing with main data source)\n\t\ttree.sync(view,function(){\n\t\t\tthis.filter(function(obj){\n\n\t\t\t\treturn (obj.$count||obj.type==\"folder\");\n\t\t\t});\n\t\t});\n\n\t\ttree.on_click.webix_tree_child_branch = function(ev, id){\n\t\t\tvar url = view.config.handlers.branch;\n\t\t\tif(url){\n\t\t\t\tview.loadDynData(url, this.getItem(id), \"branch\", true);\n\t\t\t}\n\t\t};\n\n\t\tview.attachEvent(\"onBeforeDynParse\", function(){\n\t\t\tstate = tree.getState();\n\t\t});\n\n\t\tview.attachEvent(\"onAfterDynParse\", function(obj,data,mode){\n\t\t\tif(state){\n\t\t\t\ttree.setState(state);\n\t\t\t\tstate = null;\n\t\t\t}\n\t\t\tif(mode == \"branch\" && obj.open){\n\t\t\t\ttree.open(obj.id);\n\t\t\t}\n\t\t});\n\n\t\ttree.attachEvent(\"onAfterSelect\", function(id){\n\t\t\tview.callEvent(\"onFolderSelect\",[id]);\n\t\t});\n\n\t\tview.attachEvent(\"onAfterCursorChange\", function(id){\n\t\t\tif (id){\n\t\t\t\ttree.select(id);\n\t\t\t\ttree.showItem(id);\n\t\t\t}\n\t\t});\n\n\t\t// hide search results on click\n\t\ttree.attachEvent(\"onItemClick\",function(){\n\t\t\tif(view.$searchResults){\n\t\t\t\tview.hideSearchResults();\n\t\t\t}\n\t\t});\n\n\t\tview.attachEvent(\"onItemRename\", function(id){\n\t\t\ttree.refresh(id);\n\t\t});\n\n\t\t// open/close on double-click\n\t\ttree.attachEvent(\"onItemDblClick\",function(id){\n\t\t\tif(this.isBranchOpen(id)){\n\t\t\t\tthis.close(id);\n\t\t\t}\n\t\t\telse{\n\t\t\t\tthis.open(id);\n\t\t\t}\n\t\t});\n\n\t\ttree.attachEvent(\"onBlur\",function(){\n\t\t\tif(!view.getMenu()||!view.getMenu().isVisible()){\n\t\t\t\twebix.html.addCss(this.$view,\"webix_blur\");\n\t\t\t}\n\t\t});\n\n\t\ttree.attachEvent(\"onFocus\",function(){\n\t\t\tview._activeView = tree;\n\t\t\twebix.html.removeCss(tree.$view,\"webix_blur\");\n\t\t\t// clear sub view selection\n\t\t\tview.$$(view.config.mode).unselect();\n\t\t});\n\n\n\t\t// setting path (history support)\n\t\tview.attachEvent(\"onPathComplete\",function(id){\n\t\t\ttree.showItem(id);\n\t\t});\n\n\t\t// context menu\n\t\tif(!view.config.readonly){\n\t\t\tif(view.getMenu())\n\t\t\t\tview.getMenu().attachTo(tree);\n\t\t\ttree.attachEvent(\"onBeforeMenuShow\",function(id){\n\t\t\t\tvar menu = view.getMenu();\n\n\t\t\t\tvar context = menu.getContext();\n\t\t\t\tvar type = \"\";\n\t\t\t\tif (context.id)\n\t\t\t\t\ttype = this.getParentId(context.id) ? \"folder\" : \"root\";\n\n\t\t\t\tmenu.filter(function(obj){\n\t\t\t\t\tvar res = true;\n\n\t\t\t\t\tif (obj.batch){\n\t\t\t\t\t\tif(!type){\n\t\t\t\t\t\t\tres = (obj.batch == \"empty\");\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tres = obj.batch == type;\n\t\t\t\t\t\t\tif(type != \"root\")\n\t\t\t\t\t\t\t\tres = res || obj.batch == \"item\" || obj.batch == \"empty\";\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif(view.config.menuFilter)\n\t\t\t\t\t\tres =  res && view.config.menuFilter(obj);\n\n\t\t\t\t\treturn res;\n\t\t\t\t});\n\t\t\t\tthis.select(id);\n\t\t\t\twebix.UIManager.setFocus(this);\n\t\t\t\treturn menu.count()>0;\n\t\t\t});\n\t\t}\n\n\t\t// editing (rename)\n\t\ttree.attachEvent(\"onBeforeEditStop\",function(state,editor){\n\t\t\treturn view.callEvent(\"onBeforeEditStop\",[editor.id,state,editor,tree]);\n\t\t});\n\t\ttree.attachEvent(\"onAfterEditStop\",function(state,editor){\n\t\t\tif(view.callEvent(\"onAfterEditStop\",[editor.id,state,editor,tree])){\n\t\t\t\tview.renameFile(editor.id,state.value);\n\t\t\t}\n\t\t});\n\n\t\t// drag-n-drop\n\t\ttree.attachEvent(\"onBeforeDrag\",function(context,e){\n\t\t\treturn !view.config.readonly&&view.callEvent(\"onBeforeDrag\",[context,e]);\n\t\t});\n\t\ttree.attachEvent(\"onBeforeDragIn\",function(context,e){\n\t\t\treturn !view.config.readonly&&view.callEvent(\"onBeforeDragIn\",[context,e]);\n\t\t});\n\t\ttree.attachEvent(\"onBeforeDrop\",function(context,e){\n\t\t\tif(view.callEvent(\"onBeforeDrop\",[context,e])){\n\t\t\t\tif (context.from){\t//from different component\n\t\t\t\t\tview.moveFile(context.source, context.target);\n\t\t\t\t\tview.callEvent(\"onAfterDrop\",[context,e]);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t});\n\n\t\t// focus\n\t\tvar setTreeCursor = function(){\n\t\t\tif(tree)\n\t\t\t\twebix.UIManager.setFocus(tree);\n\t\t};\n\t\tview.attachEvent(\"onAfterBack\",setTreeCursor);\n\t\tview.attachEvent(\"onAfterForward\",setTreeCursor);\n\t\tview.attachEvent(\"onAfterLevelUp\",setTreeCursor);\n\t\tview.attachEvent(\"onAfterPathClick\",setTreeCursor);\n\n\t\t// read-only mode\n\t\tif(view.config.readonly){\n\t\t\ttree.define(\"drag\",false);\n\t\t\ttree.define(\"editable\",false);\n\t\t}\n\t}\n}","import * as back from \"./views/back\";\nimport * as bodyLayout from \"./views/bodylayout\";\nimport * as collapse from \"./views/collapseall\";\nimport * as columns from \"./views/columns\";\nimport * as expand from \"./views/expandall\";\nimport * as files from \"./views/files\";\nimport * as forward from \"./views/forward\";\nimport * as mainLayout from \"./views/mainlayout\";\nimport * as menu from \"./views/menu\";\nimport * as modes from \"./views/modes\";\nimport * as modeViews from \"./views/modeviews\";\nimport * as path from \"./views/path\";\nimport * as search from \"./views/search\";\nimport * as sidePanel from \"./views/panel\";\nimport * as table from \"./views/table\";\nimport * as treeLayout from \"./views/treelayout\";\nimport * as treeToolbar from \"./views/treetoolbar\";\nimport * as toggle from \"./views/toggle\";\nimport * as toolbar from \"./views/toolbar\";\nimport * as tree from \"./views/tree\";\nimport * as up from \"./views/up\";\n\nexport function init(view, config){\n\tview.structure = {\n\t\t\"mainLayout\": mainLayout.init(view),\n\t\t\"toolbar\": toolbar.init(view),\n\t\t\"menu\": menu.init(view),\n\t\t\"back\": back.init(view),\n\t\t\"forward\": forward.init(view),\n\t\t\"up\": up.init(view),\n\t\t\"path\": path.init(view),\n\t\t\"search\": search.init(view),\n\t\t\"bodyLayout\": bodyLayout.init(view),\n\t\t\"treeLayout\": treeLayout.init(view),\n\t\t\"sidePanel\": sidePanel.init(view),\n\t\t\"treeToolbar\": treeToolbar.init(view),\n\t\t\"showTree\": toggle.init(view),\n\t\t\"hideTree\": toggle.init(view),\n\t\t\"expandAll\": expand.init(view),\n\t\t\"collapseAll\": collapse.init(view),\n\t\t\"tree\": tree.init(view),\n\t\t\"modeViews\":{\n\t\t\tconfig: function(settings){\n\t\t\t\treturn modeViews.init(view,settings);\n\t\t\t}\n\t\t},\n\t\t\"modes\":{\n\t\t\tconfig:function(settings){\n\t\t\t\treturn modes.init(view,settings);\n\t\t\t}\n\t\t},\n\t\t\"files\": {\n\t\t\tconfig: files.init(view)\n\t\t},\n\n\t\t\"table\": {\n\t\t\tconfig: table.init(view)\n\t\t},\n\t\t\"columns\": {\n\t\t\tconfig: columns.init(view)\n\t\t}\n\t};\n\n\tchangeStructure(view, config);\n}\n\n\nexport function getViews(view, struct, config){\n\tvar cells, found, i, id,\n\t\tarrName = \"\",\n\t\tarrs = [\"rows\",\"cols\",\"elements\",\"cells\",\"columns\",\"options\",\"data\"];\n\n\tfor(i =0; i< arrs.length;i++){\n\t\tif(struct[arrs[i]]){\n\t\t\tarrName = arrs[i];\n\t\t\tcells = struct[arrName];\n\t\t}\n\t}\n\tif(cells){\n\t\tif(typeof(cells) == \"string\"){\n\t\t\tif(view.structure[cells]){\n\t\t\t\tstruct[arrName] = getCellConfig(view, view.structure[cells],config);\n\t\t\t\tcells = struct[arrName];\n\t\t\t}\n\t\t}\n\n\t\tfor(i=0; i< cells.length;i++){\n\t\t\tfound = null;\n\t\t\tif(typeof(cells[i]) == \"string\"){\n\t\t\t\tfound = id = cells[i];\n\t\t\t\tif(view.structure[id]){\n\t\t\t\t\tcells[i] = getCellConfig(view, webix.extend({},view.structure[id]),config);\n\t\t\t\t\tcells[i].id = id;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\tcells[i] = { };\n\t\t\t}\n\t\t\tgetViews(view, cells[i], config);\n\t\t\tif (found){\n\t\t\t\tif(config.on && config.on.onViewInit){\n\t\t\t\t\tconfig.on.onViewInit.apply(this,[found,cells[i]]);\n\t\t\t\t}\n\t\t\t\twebix.callEvent(\"onViewInit\",[found,cells[i],this]);\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport function getCellConfig(view, defConfig, config){\n\tvar cellConfig = defConfig.config||defConfig;\n\treturn (typeof(cellConfig)==\"function\"?cellConfig.call(view,config):webix.copy(cellConfig));\n}\n\nfunction isSVG(){\n\treturn (typeof SVGRect != \"undefined\");\n}\n\nexport function getUI(view, config){\n\tvar layoutConf = view.structure.mainLayout;\n\tvar structure = webix.extend({},layoutConf.config || layoutConf);\n\tgetViews(view, structure, config);\n\n\tif(config.on && config.on.onViewInit){\n\t\tconfig.on.onViewInit.apply(view,[config.id||\"mainLayout\",structure]);\n\t}\n\twebix.callEvent(\"onViewInit\",[config.id||\"mainLayout\",structure,view]);\n\tif(!isSVG())\n\t\tconfig.css = config.css?config.css+\" webix_nosvg\":\"webix_nosvg\";\n\treturn structure;\n}\n\nfunction changeStructure(view, config){\n\tvar newView, vName,\n\t\tnewViews = config.structure;\n\n\tif(newViews){\n\t\tfor(vName in newViews){\n\t\t\tif(newViews.hasOwnProperty(vName)){\n\t\t\t\tnewView = webix.copy(newViews[vName]);\n\t\t\t\tif(view.structure[vName] && view.structure[vName].config){\n\t\t\t\t\tview.structure[vName].config = newView.config||newView;\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tview.structure[vName] = newView.config||newView;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}","export function init(){\n\tvar config = {\n\t\ttype: \"clean\",\n\t\trows:[\n\t\t\t\"toolbar\",\n\t\t\t\"bodyLayout\"\n\t\t]\n\t};\n\tif(typeof SVGRect == \"undefined\")\n\t\tconfig.css = \"webix_nosvg\";\n\treturn config;\n}","export function init(){\n\treturn {\n\t\tcss: \"webix_fmanager_toolbar\",\n\t\tpaddingX: 10,\n\t\tpaddingY:5,\n\t\tmargin: 7,\n\t\tcols:[\n\t\t\t\"menu\",\n\t\t\t{id: \"menuSpacer\", width: 75},\n\t\t\t{margin:0, cols:[\"back\",\"forward\"]},\"up\",\n\t\t\t\"path\",\"search\",\"modes\"\n\t\t]\n\t};\n}","export function init(view){\n\tview.attachEvent(\"onComponentInit\", () => ready(view));\n\treturn { view: \"button\", type:\"htmlbutton\", label: \"<div class=\\\"webix_fmanager_bar_icon \\\"></div>\",\n\t\tcss: \"webix_fmanager_menu\", icon: \"bars\", width: 37,\n\t\ttooltip: webix.i18n.filemanager.actions\n\t};\n}\n\nfunction ready(view){\n\tvar btn = view.$$(\"menu\");\n\tif(btn){\n\t\tbtn.attachEvent(\"onItemClick\",  function(){\n\t\t\tif(view.callEvent(\"onBeforeMenu\", [])){\n\t\t\t\tvar tree  = view.$$(\"tree\");\n\t\t\t\tview.getMenu().setContext({obj: tree, id: tree.getSelectedId()});\n\t\t\t\tview.getMenu().show(btn.$view);\n\t\t\t\tview.callEvent(\"onAfterMenu\", []);\n\t\t\t}\n\t\t});\n\n\t\tif(view.config.readonly){\n\t\t\tbtn.hide();\n\t\t\tif(view.$$(\"menuSpacer\"))\n\t\t\t\tview.$$(\"menuSpacer\").hide();\n\t\t}\n\t}\n}\n","export function init(view){\n\tview.attachEvent(\"onComponentInit\", () => ready(view));\n\n\treturn { view: \"button\", type:\"htmlbutton\", css: \"webix_fmanager_back\",\n\t\tlabel: \"<div class=\\\"webix_fmanager_bar_icon \\\"></div>\", width: 37,\n\t\ttooltip: webix.i18n.filemanager.back\n\t};\n}\n\nfunction ready(view){\n\tif(view.$$(\"back\")){\n\t\tview.$$(\"back\").attachEvent(\"onItemClick\", function(){\n\t\t\tif(view.callEvent(\"onBeforeBack\", [])){\n\t\t\t\tview.goBack();\n\t\t\t\tview.callEvent(\"onAfterBack\", []);\n\t\t\t}\n\t\t});\n\t\tview.attachEvent(\"onHistoryChange\", function(path, ids, cursor){\n\t\t\tif(!cursor)\n\t\t\t\tview.$$(\"back\").disable();\n\t\t\telse\n\t\t\t\tview.$$(\"back\").enable();\n\t\t});\n\t}\n}","export function init(view){\n\tview.attachEvent(\"onComponentInit\", () => ready(view));\n\n\treturn { view: \"button\", type:\"htmlbutton\", css: \"webix_fmanager_forward\",\n\t\tlabel: \"<div class=\\\"webix_fmanager_bar_icon \\\"></div>\", width: 37,\n\t\ttooltip: webix.i18n.filemanager.forward\n\t};\n}\n\nfunction ready(view){\n\tif(view.$$(\"forward\")){\n\t\tview.$$(\"forward\").attachEvent(\"onItemClick\", function(){\n\t\t\tif(view.callEvent(\"onBeforeForward\", [])){\n\t\t\t\tview.goForward();\n\t\t\t\tview.callEvent(\"onAfterForward\", []);\n\t\t\t}\n\t\t});\n\t\tview.attachEvent(\"onHistoryChange\", function(path, ids, cursor){\n\t\t\tif(ids.length ==1 || cursor == ids.length-1)\n\t\t\t\tview.$$(\"forward\").disable();\n\t\t\telse\n\t\t\t\tview.$$(\"forward\").enable();\n\t\t});\n\t}\n}","export function init(view){\n\tview.attachEvent(\"onComponentInit\", () => ready(view));\n\treturn { view: \"button\", type:\"htmlbutton\", css: \"webix_fmanager_up\",\n\t\tlabel: \"<div class=\\\"webix_fmanager_bar_icon \\\"></div>\", width: 37,\n\t\ttooltip: webix.i18n.filemanager.levelUp\n\t};\n}\n\nfunction ready(view){\n\tif(view.$$(\"up\")){\n\t\tview.$$(\"up\").attachEvent(\"onItemClick\", function(){\n\t\t\tif(view.callEvent(\"onBeforeLevelUp\", [])){\n\t\t\t\tview.levelUp();\n\t\t\t\tview.callEvent(\"onAfterLevelUp\", []);\n\t\t\t}\n\t\t});\n\t}\n}","export function init(view){\n\tview.attachEvent(\"onComponentInit\", () => ready(view));\n\n\treturn { view: \"path\", borderless: true};\n}\n\nfunction ready(view){\n\tif(view.$$(\"path\")){\n\t\tview.attachEvent(\"onFolderSelect\",function(id){\n\t\t\tview.$$(\"path\").setValue(view.getPathNames(id));\n\t\t});\n\t\tview.$$(\"path\").attachEvent(\"onItemClick\",function(id){\n\t\t\tvar targetIndex = view.$$(\"path\").getIndexById(id);\n\t\t\tvar levelUp = view.$$(\"path\").count()-targetIndex-1;\n\n\t\t\tif(view.$searchResults)\n\t\t\t\tview.hideSearchResults();\n\n\t\t\tif(levelUp){\n\t\t\t\tid = view.getCursor();\n\t\t\t\twhile(levelUp){\n\t\t\t\t\tid = view.getParentId(id);\n\t\t\t\t\tlevelUp--;\n\t\t\t\t}\n\t\t\t\tview.setCursor(id);\n\t\t\t}\n\t\t\tview.callEvent(\"onAfterPathClick\",[id]);\n\t\t});\n\n\t\tview.data.attachEvent(\"onClearAll\",function(){\n\t\t\tview.$$(\"path\").clearAll();\n\t\t});\n\t}\n}","export function init(view){\n\tview.attachEvent(\"onComponentInit\", () => ready(view));\n\n\treturn { view: \"search\", gravity: 0.3, minWidth: 80, css: \"webix_fmanager_search\", icon:\" webix_fmanager_icon\" };\n}\n\nfunction ready(view){\n\tvar search = view.$$(\"search\");\n\tif(search){\n\t\tview.attachEvent(\"onHideSearchResults\", function(){\n\t\t\tsearch.setValue(\"\");\n\t\t});\n\t\tview.attachEvent(\"onBeforeCursorChange\", function(){\n\t\t\tif(view.$searchResults){\n\t\t\t\tview.hideSearchResults(true);\n\t\t\t}\n\t\t});\n\t\tsearch.attachEvent(\"onTimedKeyPress\",  function(){\n\t\t\tif(this._code != 9){\n\t\t\t\tvar value = search.getValue();\n\t\t\t\tif(value){\n\t\t\t\t\tif(view.callEvent(\"onBeforeSearch\", [value])){\n\t\t\t\t\t\tview.showSearchResults(value);\n\t\t\t\t\t\tview.callEvent(\"onAfterSearch\", [value]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if(view.$searchResults){\n\t\t\t\t\tview.hideSearchResults();\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t});\n\t\tsearch.attachEvent(\"onKeyPress\",  function(code){\n\t\t\tthis._code = code;\n\t\t});\n\n\t\tview.attachEvent(\"onAfterModeChange\",function(){\n\t\t\tif(view.$searchResults)\n\t\t\t\tview.showSearchResults(search.getValue());\n\t\t});\n\t}\n}","export function init(){\n\treturn {\n\t\tcss: \"webix_fmanager_body\",\n\t\tcols:[\n\t\t\t\"sidePanel\",\n\t\t\t\"treeLayout\",\n\t\t\t{view:\"resizer\", id: \"resizer\", width:3},\n\t\t\t\"modeViews\"\n\t\t]\n\t};\n}","export function init(){\n\treturn {\n\t\trows:[\n\t\t\t\"treeToolbar\",\n\t\t\t\"tree\"\n\t\t]\n\t};\n}","export function init(view){\n\tview.attachEvent(\"onComponentInit\", () => ready(view));\n\treturn {\n\t\thidden:true,\n\t\tcss:\"webix_fmanager_panel\",\n\t\ttype: \"clean\",\n\t\trows:[\n\t\t\t{\n\t\t\t\theight: 34,\n\t\t\t\tpaddingY:1,\n\t\t\t\tpaddingX:0,\n\t\t\t\tview: \"form\",\n\t\t\t\tcols:[\n\t\t\t\t\t{ view: \"button\", id: \"showTree\", type:\"htmlbutton\", css: \"webix_fmanager_toggle\",\n\t\t\t\t\t\tlabel: \"<div class=\\\"webix_fmanager_bar_icon \\\"></div>\", width: 30,\n\t\t\t\t\t\ttooltip: webix.i18n.filemanager.showTree\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t},\n\t\t\t{ template:\" \"}\n\t\t]\n\t};\n}\nfunction ready(view){\n\tif(view.$$(\"showTree\")){\n\t\tview.$$(\"showTree\").attachEvent(\"onItemClick\", function(){\n\t\t\tview.showTree();\n\t\t});\n\t}\n}\n","export function init(){\n\treturn {\n\t\tcss: \"webix_fmanager_tree_toolbar\",\n\t\theight: 34,\n\t\tpaddingX: 8,\n\t\tpaddingY:1,\n\t\tmargin: 7,\n\t\tcols:[\n\t\t\t\"hideTree\",\n\t\t\t{id: \"treeSpacer\"},\n\t\t\t\"expandAll\",\"collapseAll\"\n\t\t]\n\t};\n}","export function init(view){\n\tview.attachEvent(\"onComponentInit\", () => ready(view));\n\n\treturn { view: \"button\", type:\"htmlbutton\", css: \"webix_fmanager_expand\",\n\t\tlabel: \"<div class=\\\"webix_fmanager_bar_icon \\\"></div>\", width: 30,\n\t\ttooltip: webix.i18n.filemanager.expandTree\n\t};\n}\n\nfunction ready(view){\n\tif(view._getDynMode() && view.$$(\"expandAll\")){\n\t\tview.$$(\"expandAll\").hide();\n\t}\n\tif(view.$$(\"expandAll\") && view.$$(\"tree\")){\n\t\tview.$$(\"expandAll\").attachEvent(\"onItemClick\", function(){\n\t\t\tview.$$(\"tree\").openAll();\n\t\t});\n\t}\n}","export function init(view){\n\tview.attachEvent(\"onComponentInit\", () => ready(view));\n\n\treturn { view: \"button\", type:\"htmlbutton\", css: \"webix_fmanager_collapse\",\n\t\tlabel: \"<div class=\\\"webix_fmanager_bar_icon \\\"></div>\", width: 30, tooltip: webix.i18n.filemanager.collapseTree\n\t};\n}\n\nfunction ready(view){\n\tif(view._getDynMode() && view.$$(\"collapseAll\")){\n\t\tview.$$(\"collapseAll\").hide();\n\t}\n\tif(view.$$(\"collapseAll\") && view.$$(\"tree\")){\n\t\tview.$$(\"collapseAll\").attachEvent(\"onItemClick\", function(){\n\t\t\tview.$$(\"tree\").closeAll();\n\t\t});\n\t}\n}","export function init(){\n\treturn {\n\t\tview: \"fileview\",\n\t\ttype: \"FileView\",\n\t\tselect: \"multiselect\",\n\t\teditable:true,\n\t\teditaction: false,\n\t\teditor:\"text\",\n\t\teditValue:\"value\",\n\t\tdrag: true,\n\t\tnavigation: true,\n\t\ttabFocus: true,\n\t\tonContext:{}\n\t};\n}\n\n","export function init(view){\n\tvar locale =  webix.i18n.filemanager;\n\treturn [\n\t\t{ id:\"value\",\theader: locale.name, fillspace:3, sort: \"string\", template: function(obj,common){\n\t\t\tvar name = common.templateName(obj,common);\n\t\t\treturn common.templateIcon(obj,common)+name;\n\t\t}, editor: \"text\"},\n\t\t{ id:\"date\",\theader: locale.date, fillspace:2, sort: \"int\", template: function(obj,common){\n\t\t\treturn common.templateDate(obj,common);\n\t\t}},\n\t\t{ id:\"type\",\theader: locale.type, fillspace:1, sort: \"string\", template: function(obj,common){\n\t\t\treturn common.templateType(obj);\n\t\t}},\n\t\t{ id:\"size\",\theader: locale.size, fillspace:1, sort: \"int\", css:{\"text-align\":\"right\"}, template: function(obj,common){\n\t\t\treturn obj.type==\"folder\"?\"\":common.templateSize(obj);\n\t\t}},\n\t\t{ id:\"location\",\theader: locale.location, fillspace:2, sort: \"string\", template: function(obj){\n\t\t\treturn view._getLocation(obj);\n\t\t},hidden:true}\n\t];\n}","import * as save from \"../save.js\";\n\nfunction getConfig(legacy){\n\tvar config = {};\n\tif (legacy){\n\t\tconfig = {\n\t\t\tview: \"uploader\",\n\t\t\tcss: \"webix_upload_select_ie\",\n\t\t\ttype: \"iconButton\",\n\t\t\ticon:\"check\",\n\t\t\tlabel: webix.i18n.filemanager.select,\n\t\t\tformData:{ action:\"upload\" },\n\t\t\turlData:{}\n\t\t};\n\t}\n\telse{\n\t\tconfig = {\n\t\t\tview:\"uploader\",\n\t\t\tapiOnly:true,\n\t\t\tformData:{ action:\"upload\" },\n\t\t\turlData:{}\n\t\t};\n\t}\n\treturn config;\n}\n\nexport function init(view){\n\tvar legacy = view.config.legacyUploader;\n\tvar config = getConfig(legacy);\n\n\tif(config){\n\t\tif (legacy){\n\t\t\tcreateFlashUploader(view, webix.copy(config));\n\t\t}\n\t\telse{\n\t\t\tview._uploader = webix.ui(config);\n\t\t\tview.attachEvent(\"onDestruct\", function(){\n\t\t\t\tview._uploader.destructor();\n\t\t\t});\n\t\t}\n\t}\n\tsetUploadHandlers(view);\n}\n\n\n\nfunction setUploadHandlers(view){\n\tvar uploader = getUploader(view);\n\tif(uploader){\n\t\t// define url\n\t\tuploader.config.upload = view.config.handlers.upload;\n\t\t// add drop areas\n\t\tvar modes = view.config.modes;\n\t\tif(modes && !view.config.readonly){\n\t\t\tfor(var i =0; i < modes.length; i++){\n\t\t\t\tif(view.$$(modes[i]))\n\t\t\t\t\tuploader.addDropZone(view.$$(modes[i]).$view);\n\t\t\t}\n\t\t}\n\n\t\t// handlers\n\t\tuploader.attachEvent(\"onBeforeFileAdd\",function(file){\n\t\t\tvar target = \"\"+getUploadFolder(view);\n\n\t\t\tuploader.config.formData.target = target;\n\t\t\tuploader.config.urlData.target = target;\n\t\t\t//reset upload script each time, so we can be sure that active config is used\n\t\t\tuploader.config.upload = view.config.handlers.upload;\n\n\t\t\treturn view.callEvent(\"onBeforeFileUpload\",[file]);\n\t\t});\n\t\tuploader.attachEvent(\"onAfterFileAdd\", function(file){\n\t\t\tview._uploaderFolder = null;\n\t\t\tfile.oldId = file.id;\n\t\t\tview.add({\n\t\t\t\t\"id\"   : file.id,\n\t\t\t\t\"value\": file.name,\n\t\t\t\t\"type\" : file.type,\n\t\t\t\tsize   : file.size,\n\t\t\t\tdate   : Math.round((new Date()).valueOf()/1000)\n\t\t\t}, -1, uploader.config.formData.target);\n\n\t\t\tif(view.config.uploadProgress){\n\t\t\t\tview.showProgress(view.config.uploadProgress);\n\t\t\t}\n\t\t\tview._refreshActiveFolder();\n\t\t});\n\n\t\tuploader.attachEvent(\"onUploadComplete\",function(file){\n\t\t\tif(view._uploadPopup){\n\t\t\t\tview.getMenu().hide();\n\t\t\t\tview._uploadPopup.hide();\n\t\t\t}\n\t\t\tview.hideProgress();\n\t\t\tview.callEvent(\"onAfterFileUpload\",[file]);\n\t\t});\n\t\tuploader.attachEvent(\"onFileUpload\",function(item){\n\t\t\tif(item.oldId)\n\t\t\t\tview.data.changeId(item.oldId,item.id);\n\t\t\tif(item.value)\n\t\t\t\tview.getItem(item.id).value = item.value;\n\n\t\t\tview.getItem(item.id).type = item.type;\n\t\t\tview._refreshActiveFolder();\n\t\t});\n\t\tuploader.attachEvent(\"onFileUploadError\",function(item, response){\n\t\t\tif(view.callEvent(\"onErrorResponse\", [item, response]))\n\t\t\t\tsave.errorHandler(view, response);\n\t\t\tview.hideProgress();\n\n\t\t});\n\t}\n}\n\nfunction createFlashUploader(view, config){\n\tif(!config){\n\t\tconfig = getConfig(view.config.legacyUploader);\n\t}\n\tview._uploadPopup = webix.ui({\n\t\tview:\"popup\",\n\t\tpadding:0,\n\t\twidth:250,\n\t\tbody: config\n\t});\n\tview._uploader = view._uploadPopup.getBody();\n\tview.attachEvent(\"onDestruct\", function(){\n\t\tview._uploadPopup.destructor();\n\t});\n}\n\nfunction getUploadFolder(view){\n\treturn \tview._uploaderFolder||view.getCursor();\n}\n\nexport function getUploader(view){\n\treturn \tview._uploader;\n}\n\nexport function uploadFile(view,id,e){\n\n\tif(!view.data.branch[id] && view.getItem(id).type != \"folder\"){\n\t\tid = view.getParentId(id);\n\t}\n\n\tview._uploaderFolder = id;\n\tif(view._uploadPopup){\n\t\tview._uploadPopup.destructor();\n\t\tcreateFlashUploader(view);\n\t\tsetUploadHandlers(view);\n\t\tview._uploadPopup.show(e,{x:20,y:5});\n\t}\n\telse{\n\t\tif(view._uploader)\n\t\t\tview._uploader.fileDialog();\n\t}\n}","import \"./types\";\nimport \"./locale\";\nimport \"./widgets\";\n\nimport * as context from \"./views/actions\";\nimport * as defaults from \"./defaults\";\nimport * as history from \"./history\";\nimport * as loader from \"./load\";\nimport * as path from \"./path\";\nimport * as save from \"./save\";\nimport * as tree from \"./tree\";\nimport * as ui from \"./ui\";\nimport * as uploader from \"./views/upload\";\n\n\nwebix.protoUI({\n\tname:\"filemanager\",\n\t$init: function(config) {\n\t\tthis.$view.className += \" webix_fmanager\";\n\t\twebix.extend(this.data, webix.TreeStore, true);\n\t\tthis.data.provideApi(this,true);\n\t\twebix.extend(config,this.defaults);\n\n\t\tconfig.mode = config.mode || config.modes[0];\n\n\t\tui.init(this,config);\n\t\thistory.init(this);\n\t\tloader.init(this);\n\n\t\tconfig.legacyUploader = config.legacyUploader || webix.isUndefined(XMLHttpRequest) || webix.isUndefined((new XMLHttpRequest()).upload);\n\n\t\tthis.$ready.push(()=>{\n\t\t\tthis._beforeInit();\n\t\t\tthis.callEvent(\"onComponentInit\",[]);\n\t\t});\n\t\twebix.UIManager.tabControl = true;\n\t\twebix.extend(config, ui.getUI(this,config));\n\n\t\tthis.attachEvent(\"onAfterLoad\",function(){\n\t\t\t// default cursor\n\t\t\tif(!this.getCursor || !this.getCursor()){\n\t\t\t\tvar selection =  this.config.defaultSelection;\n\t\t\t\tselection = selection?selection.call(this):this.getFirstChildId(0);\n\t\t\t\tif(this.setCursor)\n\t\t\t\t\tthis.setCursor(selection);\n\t\t\t\telse //data:[], binding is not yet applied\n\t\t\t\t\tthis.attachEvent(\"onComponentInit\", ()=>{\n\t\t\t\t\t\tthis.setCursor(selection);\n\t\t\t\t\t});\n\t\t\t}\n\t\t});\n\t},\n\thandlers_setter: function(handlers){\n\t\tif(typeof handlers == \"string\")\n\t\t\thandlers = this.setDefaultHandlers(handlers);\n\t\tfor(var h in handlers){\n\t\t\tvar url = handlers[h];\n\t\t\tif (typeof url == \"string\"){\n\t\t\t\tif(url.indexOf(\"->\") != -1){\n\t\t\t\t\tvar parts = url.split(\"->\");\n\t\t\t\t\turl = webix.proxy(parts[0], parts[1]);\n\t\t\t\t}\n\t\t\t\telse if(h != \"upload\" && h != \"download\")\n\t\t\t\t\turl = webix.proxy(\"post\", url);\n\t\t\t}\n\t\t\thandlers[h] = url;\n\t\t}\n\t\treturn handlers;\n\t},\n\tsetDefaultHandlers: function(url){\n\t\treturn {\n\t\t\tupload: url,\n\t\t\tdownload: url,\n\t\t\tcopy: url,\n\t\t\tmove: url,\n\t\t\tremove: url,\n\t\t\trename: url,\n\t\t\tcreate: url\n\t\t};\n\t},\n\t_beforeInit: function(){\n\t\tcontext.init(this);\n\t\tuploader.init(this);\n\n\t\tthis.attachEvent(\"onFolderSelect\", function(id){\n\t\t\tthis.setCursor(id);\n\t\t});\n\n\t\tthis.attachEvent(\"onBeforeDragIn\",function(context){\n\t\t\tvar target = context.target;\n\t\t\tif(target){\n\t\t\t\tvar ids = context.source;\n\t\t\t\tfor(var i=0; i < ids.length; i++){\n\t\t\t\t\twhile(target){\n\t\t\t\t\t\tif(target==ids[i]){\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttarget = this._getParentId(target);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t});\n\n\t},\n\t_getParentId: function(id){\n\t\tif(!this.getItem(id)){\n\t\t\tvar activeView = this.$$(this.config.mode);\n\t\t\tvar item = activeView.getItem(id);\n\t\t\tif(item && item.parent && this.getItem(item.parent)){\n\t\t\t\treturn item.parent;\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\t\treturn webix.TreeStore.getParentId.apply(this,arguments);\n\t},\n\tgetMenu: function(){\n\t\treturn this._contextMenu;\n\t},\n\tgetPath: function(id){\n\t\treturn path.getPath(this,id);\n\t},\n\tgetPathNames: function(id){\n\t\treturn path.getPathNames(this,id);\n\t},\n\tsetPath: function(id){\n\t\treturn path.setPath(this,id);\n\t},\n\t_getLocation: function(obj){\n\t\tvar location = \"\", path;\n\t\tif(this.getItem(obj.id) || obj.parent && this.getItem(obj.parent)){\n\t\t\tif(obj.parent){\n\t\t\t\tpath = this.getPathNames(obj.parent);\n\t\t\t\tpath.shift();\n\t\t\t}\n\t\t\telse{\n\t\t\t\tpath = this.getPathNames(obj.id);\n\t\t\t\tpath.shift();\n\t\t\t\tpath.pop();\n\t\t\t}\n\t\t\tvar names = [];\n\t\t\tfor(var i=0; i < path.length;i++){\n\t\t\t\tnames.push(path[i].value);\n\t\t\t}\n\t\t\tlocation = \"/\"+names.join(\"/\");\n\t\t}\n\t\telse if(obj.location){\n\t\t\tlocation = obj.location;\n\t\t}\n\t\telse if(typeof obj.id == \"string\"){\n\t\t\tvar parts = obj.id.split(\"/\");\n\t\t\tparts.pop();\n\t\t\tlocation = \"/\"+parts.join(\"/\");\n\t\t}\n\t\treturn location;\n\t},\n\tgetSearchData: function(id,value){\n\t\tvar found = [];\n\t\tthis.data.each(function(obj){\n\t\t\tvar text = this.config.templateName(obj);\n\t\t\tif(text.toLowerCase().indexOf(value.toLowerCase())>=0){\n\t\t\t\tfound.push(webix.copy(obj));\n\t\t\t}\n\t\t},this,true,id);\n\t\treturn found;\n\t},\n\tshowSearchResults: function(value){\n\t\tvar id = this.getCursor();\n\t\tif(this.config.handlers.search){\n\t\t\tloader.loadSearchData(this,this.config.handlers.search, id, value);\n\t\t}\n\t\telse{\n\t\t\tvar data = \tthis.getSearchData(id, value);\n\t\t\tloader.parseSearchData(this,data);\n\t\t}\n\t},\n\thideSearchResults: function(skipRefresh){\n\t\tif(this.$searchResults){\n\t\t\tthis.callEvent(\"onHideSearchResults\",[]);\n\t\t\tthis.$searchResults = false;\n\t\t\t// refresh cursor\n\t\t\tif(!skipRefresh){\n\t\t\t\tvar id = this.getCursor();\n\t\t\t\tthis.blockEvent();\n\t\t\t\tthis.setCursor(null);\n\t\t\t\tthis.unblockEvent();\n\t\t\t\tthis.setCursor(id);\n\t\t\t}\n\t\t}\n\t},\n\tgoBack: function(step){\n\t\tstep = (step?(-1)*Math.abs(step):-1);\n\t\treturn history.changeCursor(this, step);\n\t},\n\tgoForward: function(step){\n\t\treturn history.changeCursor(this, step||1);\n\t},\n\tlevelUp: function(id){\n\t\tid = id||this.getCursor();\n\t\tif(id){\n\t\t\tid = this.getParentId(id);\n\t\t\tthis.setCursor(id);\n\t\t}\n\t},\n\tmarkCopy: function(ids){\n\t\tif(ids){\n\t\t\tif(!webix.isArray(ids)){\n\t\t\t\tids = [ids];\n\t\t\t}\n\t\t\tthis._moveData = ids;\n\t\t\tthis._copyFiles = true;\n\t\t}\n\t},\n\tmarkCut: function(ids){\n\t\tif(ids){\n\t\t\tif(!webix.isArray(ids)){\n\t\t\t\tids = [ids];\n\t\t\t}\n\t\t\tthis._moveData = ids;\n\t\t\tthis._copyFiles = false;\n\t\t}\n\t},\n\tpasteFile: function(id){\n\t\tif(webix.isArray(id)){\n\t\t\tid = id[0];\n\t\t}\n\t\tif(id){\n\t\t\tid = id.toString();\n\t\t\tif(this.getItem(id) && this.getItem(id).type == \"folder\"){\n\t\t\t\tif(this._moveData){\n\t\t\t\t\tif(this._copyFiles){\n\t\t\t\t\t\tthis.copyFile(this._moveData,id);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t\tthis.moveFile(this._moveData,id);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\tdownload:function(id){\n\t\tvar url = this.config.handlers.download;\n\t\tif (url)\n\t\t\twebix.send(url, { action:\"download\", source: id });\n\t},\n\tfileExists: function(name,target,id){\n\t\tvar result = false;\n\t\tthis.data.eachChild(target, webix.bind(function(obj){\n\t\t\tif(name == obj.value&&!(id && obj.id==id)){\n\t\t\t\tresult = obj.id;\n\t\t\t}\n\t\t},this));\n\t\treturn result;\n\t},\n\t_refreshActiveFolder: function(){\n\t\tthis.$skipDynLoading = true;\n\t\tthis.$$(this.config.mode).$skipBinding = false;\n\t\tthis.refreshCursor();\n\t},\n\t_setFSId: function(item){\n\t\tvar newId = this.getParentId(item.id)+\"/\"+item.value;\n\t\tif(item.id != newId)\n\t\t\tthis.data.changeId( item.id, newId );\n\t},\n\t_changeChildIds: function(id){\n\t\tthis.data.eachSubItem(id,webix.bind(function(item){\n\t\t\tif(item.value)\n\t\t\t\tthis._setFSId(item);\n\t\t},this));\n\t},\n\t_callbackRename: function(id, value){\n\t\tvar item = this.getItem(id);\n\t\tif(item.value != value){\n\t\t\titem.value = value;\n\t\t\tthis.$$(\"tree\").updateItem(id, { value });\n\t\t\tthis._refreshActiveFolder();\n\t\t\tthis.callEvent(\"onItemRename\", [id]);\n\t\t}\n\t},\n\t_moveFile: function(source,target,copy){\n\t\tvar action = (copy?\"copy\":\"move\"),\n\t\t\tids = [];\n\t\tsource.reverse();\n\t\tfor(var i=0; i<source.length; i++){\n\t\t\tif(this.getItem(source[i])){\n\t\t\t\tvar newId = this.move(source[i],0,this,{parent:target,copy:copy?true:false});\n\t\t\t\tids.push(newId);\n\t\t\t}\n\t\t}\n\n\t\tthis._refreshActiveFolder();\n\t\tvar url = this.config.handlers[action];\n\t\tif (url){\n\t\t\tsave.makeSaveRequest(this, url,{ action: action, source:source.join(\",\"), temp: ids.join(\",\"), target: target.toString() },function(requestData,responseData){\n\t\t\t\tif(responseData && webix.isArray(responseData)){\n\t\t\t\t\tvar ids = requestData.temp.split(\",\");\n\t\t\t\t\tfor(var i=0;i < responseData.length;i++){\n\t\t\t\t\t\tif(responseData[i].id && (responseData[i].id!=ids[i]) && this.data.pull[ids[i]]){\n\t\t\t\t\t\t\tthis.data.changeId(ids[i],responseData[i].id);\n\t\t\t\t\t\t\tif(this.config.fsIds)\n\t\t\t\t\t\t\t\tthis._changeChildIds(responseData[i].id);\n\t\t\t\t\t\t\tif(responseData[i].value){\n\t\t\t\t\t\t\t\tthis._callbackRename(responseData[i].id,responseData[i].value);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis._updateDynSearch();\n\t\t\t});\n\t\t}\n\t},\n\t_updateDynSearch: function(){\n\t\tif(this.$searchResults && this.$searchValue){\n\t\t\tthis.showSearchResults(this.$searchValue);\n\t\t}\n\t},\n\tcopyFile: function(source, target){\n\t\tthis.moveFile(source, target, true);\n\t},\n\tmoveFile:function(source, target, copy){\n\t\tvar i, id, result;\n\t\tif(typeof(source) == \"string\"){\n\t\t\tsource = source.split(\",\");\n\t\t}\n\t\tif(!webix.isArray(source)){\n\t\t\tsource = [source];\n\t\t}\n\t\tif(!target){\n\t\t\ttarget = this.getCursor();\n\t\t}\n\t\telse if(!this.data.branch[target]&&this.getItem(target.toString()).type!=\"folder\"){\n\t\t\ttarget = this.getParentId(target);\n\t\t}\n\n\t\tresult = true;\n\t\ttarget = target.toString();\n\n\t\tfor(i=0; i<source.length; i++){\n\t\t\tid = source[i].toString();\n\t\t\tresult = result&&this._isMovingAllowed(id,target);\n\n\t\t}\n\t\tif(result){\n\t\t\tthis._moveFile(source,target,copy?true:false);\n\t\t}\n\t\telse{\n\t\t\tthis.callEvent(copy?\"onCopyError\":\"onMoveError\", []);\n\t\t}\n\t},\n\tdeleteFile:function(ids,callback){\n\t\tif(typeof(ids) == \"string\"){\n\t\t\tids = ids.split(\",\");\n\t\t}\n\t\tif(!webix.isArray(ids)){\n\t\t\tids = [ids];\n\t\t}\n\t\tfor(var i=0; i<ids.length; i++){\n\t\t\tvar id = ids[i];\n\t\t\tif(this.$$(this.config.mode).isSelected(id))\n\t\t\t\tthis.$$(this.config.mode).unselect(id);\n\t\t\tif(id == this.getCursor())\n\t\t\t\tthis.setCursor(this.getFirstId());\n\t\t\tif(id)\n\t\t\t\tthis.remove(id);\n\t\t}\n\t\tthis._refreshActiveFolder();\n\n\t\tvar url = this.config.handlers.remove;\n\t\tif (url){\n\t\t\tif(callback)\n\t\t\t\tcallback = webix.bind(callback,this);\n\t\t\tsave.makeSaveRequest(this, url,{ action:\"remove\", source:ids.join(\",\") }, callback);\n\t\t}\n\t\telse if(callback){\n\t\t\tcallback.call(this);\n\t\t}\n\n\t},\n\t_createFolder: function(obj,target){\n\t\tthis.add(obj, 0, target);\n\t\tthis._refreshActiveFolder();\n\t\tvar url = this.config.handlers.create;\n\t\tif (url){\n\t\t\tsave.makeSaveRequest(this, url, {\n\t\t\t\tid: obj.id,\n\t\t\t\tsource: obj.value,\n\t\t\t\ttarget: target,\n\t\t\t\taction: \"create\"\n\t\t\t}, function(requestData,responseData){\n\t\t\t\tif(responseData.id){\n\t\t\t\t\tif(requestData.id != responseData.id)\n\t\t\t\t\t\tthis.data.changeId(requestData.id,responseData.id);\n\t\t\t\t\tif(this.config.fsIds)\n\t\t\t\t\t\tthis._changeChildIds(responseData.id);\n\t\t\t\t\tif(responseData.value){\n\t\t\t\t\t\tthis._callbackRename(responseData.id,responseData.value);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t},\n\tcreateFolder: function(target){\n\t\tif(typeof(target) == \"string\"){\n\t\t\ttarget = target.split(\",\");\n\t\t}\n\t\tif(webix.isArray(target)){\n\t\t\ttarget = target[0];\n\t\t}\n\t\tif(target){\n\t\t\ttarget = \"\"+target;\n\t\t\tvar item = this.getItem(target);\n\t\t\tif(!this.data.branch[target] && (item.type != \"folder\")){\n\t\t\t\ttarget = this.getParentId(target);\n\t\t\t}\n\t\t\tvar obj = this.config.templateCreate(item);\n\n\t\t\ttarget = \"\"+target;\n\t\t\tthis._createFolder(obj,target);\n\t\t}\n\t},\n\teditFile: function(id){\n\t\tif(webix.isArray(id)){\n\t\t\tid = id[0];\n\t\t}\n\t\tif(this.getActiveView()&&this.getActiveView().edit)\n\t\t\tthis.getActiveView().edit(id);\n\n\t},\n\trenameFile: function(id,name,field){\n\t\tvar item = this.getItem(id);\n\t\tfield = (field||\"value\");\n\t\tif(item)\n\t\t\titem[field] = name;\n\n\t\tthis.refresh(item ? id : \"\");\n\t\tthis._refreshActiveFolder();\n\t\tthis.callEvent(\"onFolderSelect\",[this.getCursor()]);\n\n\t\tvar url = this.config.handlers.rename;\n\t\tif (url){\n\t\t\tvar obj = { source:id, action:\"rename\", target: name};\n\t\t\tsave.makeSaveRequest(this, url,obj,function(requestData,responseData){\n\t\t\t\tif(responseData.id && this.getItem(requestData.source)){\n\t\t\t\t\tif(requestData.source != responseData.id)\n\t\t\t\t\t\tthis.data.changeId(requestData.source,responseData.id);\n\t\t\t\t\tif(this.config.fsIds)\n\t\t\t\t\t\tthis._changeChildIds(responseData.id);\n\t\t\t\t\tif(responseData.value){\n\t\t\t\t\t\tthis._callbackRename(responseData.id,responseData.value);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis._updateDynSearch();\n\t\t\t});\n\t\t}\n\t},\n\t_isMovingAllowed: function(source,target){\n\t\twhile(target){\n\t\t\tif(target==source || (!this.data.branch[target]&&this.getItem(target.toString()).type != \"folder\")){\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\ttarget = this.getParentId(target);\n\t\t}\n\t\treturn true;\n\t},\n\tgetActiveView: function(){\n\t\treturn this._activeView||this.$$(\"tree\")||null;\n\t},\n\tgetActive: function(){\n\t\tvar selected = this.getSelectedFile();\n\t\treturn selected?selected:this.getCursor();\n\t},\n\t/*\n\t * returns the name of the folder selected in Tree\n\t * */\n\tgetCurrentFolder: function(){\n\t\treturn this.$$(\"tree\").getSelectedId();\n\t},\n\t/*\n\t * returns a string or an array with selected file(folder) name(s)\n\t * */\n\tgetSelectedFile: function(){\n\t\tvar result = null,\n\t\t\tselected = this.$$(this.config.mode).getSelectedId();\n\n\t\tif(selected){\n\t\t\tif(!webix.isArray(selected))\n\t\t\t\tresult = selected.toString();\n\t\t\telse{\n\t\t\t\tresult = [];\n\t\t\t\tfor(var i=0; i < selected.length; i++){\n\t\t\t\t\tresult.push(selected[i].toString());\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t},\n\t_openFolder: function(id){\n\t\tif(this.callEvent(\"onBeforeLevelDown\",[id])){\n\t\t\tthis.setCursor(id);\n\t\t\tthis.callEvent(\"onAfterLevelDown\",[id]);\n\t\t}\n\t},\n\t_runFile: function(id){\n\t\tif(this.callEvent(\"onBeforeRun\",[id])){\n\t\t\tthis.download(id);\n\t\t\tthis.callEvent(\"onAfterRun\",[id]);\n\t\t}\n\t},\n\t_onFileDblClick: function(id){\n\t\tid = id.toString();\n\t\tvar item = this.getItem(id);\n\t\tif(item) {\n\t\t\tif (this.data.branch[id] || (item.type == \"folder\"))\n\t\t\t\tthis._openFolder(id);\n\t\t\telse\n\t\t\t\tthis._runFile(id);\n\t\t} else{\n\t\t\t// dynamic loading\n\t\t\tif(this.$$(this.config.mode).filter){\n\t\t\t\titem = this.$$(this.config.mode).getItem(id);\n\t\t\t\tif(item.type != \"folder\"){\n\t\t\t\t\tthis._runFile(id);\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tvar folders = item&&item.parents?item.parents:path.getParentFolders(id);\n\t\t\t\t\tif(folders.length){\n\t\t\t\t\t\tthis.openFolders(folders).then( webix.bind(function(){\n\t\t\t\t\t\t\tthis._openFolder(id);\n\t\t\t\t\t\t},this));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\topenFolders: function(folders){\n\t\treturn loader.openFolders(this, folders);\n\t},\n\t_addElementHotKey: function(key, func, view){\n\t\tvar keyCode = webix.UIManager.addHotKey(key, func, view);\n\t\t(view||this).attachEvent(\"onDestruct\", function(){\n\t\t\twebix.UIManager.removeHotKey(keyCode, func, view);\n\t\t});\n\t},\n\tclearBranch: function(id){\n\t\tloader.clearBranch(this,id);\n\t},\n\tparseData: function(data){\n\t\tloader.parseData(this,data);\n\t},\n\t_getDynMode: function(){\n\t\treturn loader.getDynMode(this);\n\t},\n\tloadDynData: function(url, obj, mode, open){\n\t\tloader.loadDynData(this, url, obj, mode, open);\n\t},\n\tgetUploader: function(){\n\t\treturn \tuploader.getUploader(this);\n\t},\n\tuploadFile: function(id,e){\n\t\treturn uploader.uploadFile(this,id,e);\n\t},\n\thideTree: function(){\n\t\tif(this.callEvent(\"onBeforeHideTree\",[])){\n\t\t\ttree.hideTree(this);\n\t\t\tthis.callEvent(\"onAfterHideTree\",[]);\n\t\t}\n\t},\n\tshowTree: function(){\n\t\tif(this.callEvent(\"onBeforeShowTree\",[])){\n\t\t\ttree.showTree(this);\n\t\t\tthis.callEvent(\"onAfterShowTree\",[]);\n\t\t}\n\t},\n\tdefaults: defaults.values\n},  webix.ProgressBar, webix.IdSpace, webix.ui.layout,webix.TreeDataMove, webix.TreeDataLoader, webix.DataLoader, webix.EventSystem, webix.Settings);\n\n","export function hideTree(view){\n\tif(view.$$(\"treeLayout\")){\n\t\tview.$$(\"treeLayout\").hide();\n\t\tif(view.$$(\"resizer\"))\n\t\t\tview.$$(\"resizer\").hide();\n\t\tif(view.$$(\"sidePanel\"))\n\t\t\tview.$$(\"sidePanel\").show();\n\t}\n}\nexport function showTree(view){\n\tif(view.$$(\"treeLayout\")){\n\t\tview.$$(\"treeLayout\").show();\n\t\tif(view.$$(\"resizer\"))\n\t\t\tview.$$(\"resizer\").show();\n\t\tif(view.$$(\"sidePanel\"))\n\t\t\tview.$$(\"sidePanel\").hide();\n\t}\n}"],"names":["init","view","attachEvent","ready","menu","getMenu","id","e","obj","this","getItem","method","active","getActive","callEvent","event","config","legacyUploader","_uploadPopup","hide","args","webix","html","pos","push","delay","apply","filter","c","getContext","unselectAll","templateName","popup","width","padding","autofocus","css","template","common","name","icon","indexOf","data","getData","batch","value","i18n","filemanager","copy","cut","paste","$template","create","remove","rename","upload","_contextMenu","ui","destructor","type","tree","dragTemplate","i","$level","webix_child_branch","$count","open","folder","dataview","height","margin","templateIcon","actions","back","forward","levelUp","size","date","location","select","sizeLabels","iconsView","tableView","hideTree","showTree","collapseTree","expandTree","saving","errorResponse","replaceConfirmation","createConfirmation","renameConfirmation","yes","no","types","doc","excel","pdf","pp","text","video","image","code","audio","archive","file","protoUI","EditAbility","list","ContextHelper","submenu","$dragHTML","item","ctx","DragControl","getTextSize","posView","offset","$view","x","x_offset","y_offset","index","getColumnIndex","columns","clientX","datatable","defaults","layout","separator","scroll","$skin","skin","$active","buttonHeight","inputHeight","$init","className","value_setter","setValue","values","clearAll","split","parse","getValue","serialize","modes","mode","handlers","structure","fsIds","templateSize","labels","pow","isInt","parseInt","Number","numToStr","decimalDelimiter","groupDelimiter","decimalSize","groupSize","format","templateType","templateDate","_typeof","Date","fullDateFormatStr","templateCreate","icons","uploadProgress","changeCursor","step","_cursorHistory","length","_historyCursor","_historyIgnore","setCursor","getCursor","sortData","sort","sorter","DataStore","prototype","sorting","folders","files","concat","$skipDynLoading","setDataParsers","dataParser","noFileCache","clearBranch","webix_files","parseData","branch","webix_branch","items","eachChild","_refreshActiveFolder","openDynFolder","ids","defer","showProgress","url","load","action","source","then","hideProgress","convertData","call","lastId","shift","refreshCursor","resolve","getDynMode","parseSearchData","$searchResults","cell","$$","sortState","driver","toObject","getParentFolders","parts","replace","slice","join","makeSaveRequest","callback","showSaveMessage","hideSaveMessage","_saveMessage","error","errorHandler","message","_saveMessageDate","style","position","insertBefore","msg","innerHTML","ajax","getModeConfig","tooltip","settings","mCell","show","unselect","editStop","addCellConfig","animate","cells","bindData","oldId","newId","pull","changeId","$skipBinding","bind","loadDynData","importSelectedBranch","target","getBranch","importData","applyTemplates","setCellHandlers","_onFileDblClick","_addElementHotKey","getSelectedId","getFirstId","_activeView","removeCss","isVisible","addCss","state","editor","getTopParentView","row","column","renameFile","context","from","moveFile","readonly","sview","selected","UIManager","setFocus","id0","addMenuHandlers","on_context","webix_view","locate","srcElement","setContext","preventEvent","attachTo","res","menuFilter","count","sel","found","isArray","exists","isSelected","toString","define","isColumnVisible","hideColumn","showColumn","edit","by","dir","as","showSearchResults","headerRowHeight","editable","editaction","drag","navigation","resizeColumn","tabFocus","onContext","label","sync","on_click","webix_tree_child_branch","ev","getState","setState","showItem","hideSearchResults","refresh","isBranchOpen","close","getParentId","setTreeCursor","filterMode","showSubItems","openParents","rows","SVGRect","mainLayout","paddingX","paddingY","cols","btn","goBack","path","cursor","enable","disable","goForward","up","getPathNames","targetIndex","getIndexById","borderless","search","_code","gravity","minWidth","hidden","sidePanel","toggle","_getDynMode","openAll","expand","closeAll","collapse","modeViews","options","forEach","editValue","table","locale","header","fillspace","_getLocation","changeStructure","newView","vName","newViews","hasOwnProperty","getCellConfig","defConfig","cellConfig","getUI","layoutConf","extend","getViews","struct","arrName","arrs","on","onViewInit","isSVG","getConfig","legacy","formData","urlData","apiOnly","setUploadHandlers","uploader","getUploader","addDropZone","getUploadFolder","_uploaderFolder","add","Math","round","valueOf","response","save","createFlashUploader","body","_uploader","getBody","TreeStore","provideApi","$ready","setHandlers","splice","history","loader","isUndefined","XMLHttpRequest","_this","_beforeInit","tabControl","selection","defaultSelection","getFirstChildId","_this2","handlers_setter","h","setDefaultHandlers","proxy","download","move","_getParentId","arguments","parent","getPath","reverse","setPath","pId","openFolders","pop","names","getSearchData","each","toLowerCase","loadSearchData","params","$searchValue","skipRefresh","blockEvent","unblockEvent","abs","markCopy","_moveData","_copyFiles","markCut","pasteFile","copyFile","send","fileExists","result","_setFSId","_changeChildIds","eachSubItem","_callbackRename","updateItem","_moveFile","temp","requestData","responseData","_updateDynSearch","_isMovingAllowed","deleteFile","_createFolder","createFolder","editFile","getActiveView","field","getSelectedFile","getCurrentFolder","_openFolder","_runFile","parents","dynMode","pItem","promise","reject","key","func","keyCode","addHotKey","removeHotKey","uploadFile","y","fileDialog","ProgressBar","IdSpace","TreeDataMove","TreeDataLoader","DataLoader","EventSystem","Settings"],"mappings":"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"}